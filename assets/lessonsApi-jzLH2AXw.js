class c{constructor(){this.cache=new Map,this.basePath=this.detectBasePath(),console.log("ğŸ“ Base path:",this.basePath,"(is GitHub:",this.isGitHubPages(),")")}isGitHubPages(){return window.location.hostname.includes("github.io")}detectBasePath(){if(this.isGitHubPages()){const t=window.location.pathname.match(/^\/([^\/]+)\//);return t?`/${t[1]}/`:"/BudaLearn/"}return"/BudaLearn/"}async getLesson(e,t){const o=`${e}/${t}`;if(this.cache.has(o))return this.cache.get(o);try{const n=e.toLowerCase(),a=`${this.basePath}data/lessons/${n}/${t}.json`;console.log("ğŸŒ Fetch:",a,"(GitHub:",this.isGitHubPages(),")");const s=await fetch(a);if(!s.ok)throw new Error(`HTTP ${s.status} for ${a}`);const r=await s.json();return this.cache.set(o,r),r}catch(n){if(console.error("âŒ Fetch failed:",e,t,n.message),this.isGitHubPages()){const a=`/BudaLearn/data/lessons/${e}/${t}.json`;console.log("ğŸ”„ Trying fallback URL:",a);try{const s=await fetch(a);if(s.ok)return await s.json()}catch{console.error("âŒ Fallback also failed")}}return{title:`Ğ£Ñ€Ğ¾Ğº ${t}`,content:"<p>Ğ£Ñ€Ğ¾Ğº Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½</p>",slug:t}}}async getTopics(e){try{const t=`${this.basePath}data/topics.json`;console.log("ğŸ“‹ Loading topics from:",t);const o=await fetch(t);if(!o.ok){if(this.isGitHubPages()){const a="/BudaLearn/data/topics.json";console.log("ğŸ”„ Trying fallback topics URL:",a);const s=await fetch(a);if(s.ok)return(await s.json())[e.toLowerCase()]||[]}throw new Error(`HTTP ${o.status}`)}return(await o.json())[e.toLowerCase()]||[]}catch(t){return console.error("âŒ Topics error:",t),[]}}}const h=new c;export{h as l};
