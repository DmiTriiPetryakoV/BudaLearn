{
  "slug": "css-preprocessors",
  "title": "CSS Препроцессоры: Sass, Less, Stylus",
  "description": "Освойте использование CSS препроцессоров для написания более структурированного, поддерживаемого и эффективного кода.",
  "difficulty": "intermediate",
  "duration": 60,
  "time":15,

  "theory": "## Введение в CSS препроцессоры\n\nCSS препроцессоры — это языки, которые расширяют возможности CSS, добавляя переменные, вложенность, миксины и другие функции, а затем компилируются в обычный CSS.\n\n## Зачем нужны препроцессоры?\n\n### Преимущества\n- **Переменные** — переиспользование значений\n- **Вложенность** — лучшая организация кода\n- **Миксины** — переиспользуемые блоки стилей\n- **Функции** — вычисления и операции\n- **Импорты** — модульность\n- **Наследование** — расширение стилей\n\n### Популярные препроцессоры\n1. **Sass/SCSS** — самый популярный\n2. **Less** — простой синтаксис\n3. **Stylus** — гибкий синтаксис\n\n## Sass/SCSS\n\n### Установка и настройка\n```bash\n# Установка через npm\nnpm install -g sass\n\n# Компиляция файла\nsass input.scss output.css\n\n# Компиляция с отслеживанием изменений\nsass --watch input.scss:output.css\n\n# Компиляция в сжатый CSS\nsass --style compressed input.scss output.css\n```\n\n### Синтаксис SCSS vs Sass\n```scss\n// SCSS синтаксис (похож на CSS)\n.container {\n    width: 100%;\n    .item {\n        color: red;\n    }\n}\n\n// Sass синтаксис (отступы без скобок)\n.container\n    width: 100%\n    .item\n        color: red\n```\n\n## Основные возможности\n\n### Переменные\n```scss\n// Объявление переменных\n$primary-color: #3498db;\n$secondary-color: #2ecc71;\n$font-stack: 'Helvetica', sans-serif;\n$base-padding: 1rem;\n$breakpoint-md: 768px;\n\n// Использование\n.button {\n    background-color: $primary-color;\n    font-family: $font-stack;\n    padding: $base-padding;\n}\n\n// Переменные в медиа-запросах\n@media (min-width: $breakpoint-md) {\n    .container {\n        width: 80%;\n    }\n}\n```\n\n### Вложенность (Nesting)\n```scss\n// Базовая вложенность\n.nav {\n    background: #333;\n    \n    ul {\n        list-style: none;\n        padding: 0;\n        \n        li {\n            display: inline-block;\n            \n            a {\n                color: white;\n                text-decoration: none;\n                \n                &:hover {\n                    color: #3498db;\n                }\n            }\n        }\n    }\n}\n\n// Родительский селектор &\n.button {\n    background: blue;\n    \n    &-primary {\n        background: darkblue;\n    }\n    \n    &-large {\n        font-size: 1.5rem;\n    }\n    \n    &:hover {\n        opacity: 0.8;\n    }\n    \n    &:disabled {\n        opacity: 0.5;\n    }\n}\n\n// Вложенность свойств\n.font {\n    &-size {\n        &-small { font-size: 12px; }\n        &-medium { font-size: 16px; }\n        &-large { font-size: 20px; }\n    }\n    \n    &-weight {\n        &-light { font-weight: 300; }\n        &-normal { font-weight: 400; }\n        &-bold { font-weight: 700; }\n    }\n}\n```\n\n### Миксины (Mixins)\n```scss\n// Объявление миксина\n@mixin flex-center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n@mixin box-shadow($x, $y, $blur, $color) {\n    box-shadow: $x $y $blur $color;\n    -webkit-box-shadow: $x $y $blur $color;\n    -moz-box-shadow: $x $y $blur $color;\n}\n\n@mixin respond-to($breakpoint) {\n    @media (min-width: $breakpoint) {\n        @content;\n    }\n}\n\n// Использование миксинов\n.container {\n    @include flex-center;\n    @include box-shadow(0, 2px, 10px, rgba(0,0,0,0.1));\n    \n    @include respond-to(768px) {\n        width: 80%;\n    }\n}\n\n// Миксины с параметрами по умолчанию\n@mixin button($color: blue, $padding: 1rem) {\n    background-color: $color;\n    padding: $padding;\n    border: none;\n    border-radius: 4px;\n    color: white;\n    \n    &:hover {\n        background-color: darken($color, 10%);\n    }\n}\n\n.primary-button {\n    @include button($primary-color, 1.5rem);\n}\n\n.secondary-button {\n    @include button(#666, 1rem);\n}\n```\n\n### Наследование (Extend)\n```scss\n// Базовый класс\n%button-base {\n    display: inline-block;\n    padding: 1rem 2rem;\n    border-radius: 4px;\n    text-decoration: none;\n    font-weight: bold;\n    transition: background-color 0.3s;\n}\n\n// Класс-шаблон\n%message-base {\n    padding: 1rem;\n    border: 1px solid;\n    border-radius: 4px;\n    margin: 1rem 0;\n}\n\n// Использование\n.primary-button {\n    @extend %button-base;\n    background-color: blue;\n    color: white;\n}\n\n.secondary-button {\n    @extend %button-base;\n    background-color: gray;\n    color: black;\n}\n\n.success-message {\n    @extend %message-base;\n    background-color: #d4edda;\n    border-color: #c3e6cb;\n    color: #155724;\n}\n\n.error-message {\n    @extend %message-base;\n    background-color: #f8d7da;\n    border-color: #f5c6cb;\n    color: #721c24;\n}\n```\n\n### Импорт (Import) и модульность\n```scss\n// Структура проекта\n// styles/\n//   ├── main.scss\n//   ├── variables.scss\n//   ├── mixins.scss\n//   ├── components/\n//   │   ├── _buttons.scss\n//   │   ├── _cards.scss\n//   │   └── _forms.scss\n//   └── layout/\n//       ├── _header.scss\n//       ├── _footer.scss\n//       └── _grid.scss\n\n// variables.scss\n$primary-color: #3498db;\n$secondary-color: #2ecc71;\n\n// mixins.scss\n@mixin flex-center { /* ... */ }\n\n// _buttons.scss\n.button { /* ... */ }\n\n// main.scss\n@import 'variables';\n@import 'mixins';\n@import 'components/buttons';\n@import 'components/cards';\n@import 'layout/header';\n@import 'layout/footer';\n```\n\n### Функции (Functions)\n```scss\n// Встроенные функции\n.element {\n    color: lighten(#3498db, 20%);\n    background-color: darken(#2ecc71, 10%);\n    border-color: rgba(0, 0, 0, 0.5);\n    width: percentage(2/3);\n}\n\n// Пользовательские функции\n@function em($pixels, $context: 16px) {\n    @return ($pixels / $context) * 1em;\n}\n\n@function tint($color, $percentage) {\n    @return mix(white, $color, $percentage);\n}\n\n@function shade($color, $percentage) {\n    @return mix(black, $color, $percentage);\n}\n\n// Использование\n.element {\n    font-size: em(24px); // 1.5em\n    background: tint(#3498db, 20%);\n    border-color: shade(#3498db, 30%);\n}\n```\n\n### Управляющие директивы\n\n#### @if, @else, @else if\n```scss\n@mixin theme($theme: light) {\n    @if $theme == light {\n        background-color: white;\n        color: black;\n    } @else if $theme == dark {\n        background-color: black;\n        color: white;\n    } @else {\n        background-color: gray;\n        color: black;\n    }\n}\n\n.container {\n    @include theme(dark);\n}\n```\n\n#### @for\n```scss\n// Генерация классов\n@for $i from 1 through 12 {\n    .col-#{$i} {\n        width: percentage($i / 12);\n    }\n}\n\n// Генерация отступов\n@for $i from 1 through 10 {\n    .mt-#{$i} {\n        margin-top: #{$i * 0.5}rem;\n    }\n    .mb-#{$i} {\n        margin-bottom: #{$i * 0.5}rem;\n    }\n}\n```\n\n#### @each\n```scss\n// Итерация по списку\n$colors: primary #3498db, secondary #2ecc71, danger #e74c3c;\n\n@each $name, $color in $colors {\n    .text-#{$name} {\n        color: $color;\n    }\n    \n    .bg-#{$name} {\n        background-color: $color;\n    }\n}\n\n// Итерация по карте (map)\n$theme-colors: (\n    \"primary\": #3498db,\n    \"secondary\": #2ecc71,\n    \"success\": #27ae60,\n    \"danger\": #e74c3c\n);\n\n@each $name, $color in $theme-colors {\n    .btn-#{$name} {\n        background-color: $color;\n        \n        &:hover {\n            background-color: darken($color, 10%);\n        }\n    }\n}\n```\n\n#### @while\n```scss\n$i: 1;\n@while $i <= 5 {\n    .item-#{$i} {\n        width: 20px * $i;\n    }\n    $i: $i + 1;\n}\n```\n\n## Less\n\n### Особенности Less\n```less\n// Переменные\n@primary-color: #3498db;\n@padding-base: 1rem;\n\n// Миксины\n.border-radius(@radius: 4px) {\n    border-radius: @radius;\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n}\n\n.button {\n    background: @primary-color;\n    .border-radius(8px);\n    \n    &:hover {\n        background: darken(@primary-color, 10%);\n    }\n}\n\n// Guards (условия)\n.mixin(@color) when (lightness(@color) > 50%) {\n    color: black;\n}\n.mixin(@color) when (lightness(@color) <= 50%) {\n    color: white;\n}\n```\n\n## Stylus\n\n### Особенности Stylus\n```stylus\n// Очень гибкий синтаксис\nprimary-color = #3498db\npadding-base = 1rem\n\nborder-radius(radius = 4px)\n    border-radius radius\n    -webkit-border-radius radius\n    -moz-border-radius radius\n\n.button\n    background primary-color\n    border-radius 8px\n    \n    &:hover\n        background darken(primary-color, 10%)\n```\n\n## Практические примеры\n\n### Grid система\n```scss\n// _grid.scss\n$grid-columns: 12;\n$grid-gap: 20px;\n\n.container {\n    display: grid;\n    grid-template-columns: repeat($grid-columns, 1fr);\n    gap: $grid-gap;\n}\n\n@for $i from 1 through $grid-columns {\n    .col-#{$i} {\n        grid-column: span $i;\n    }\n}\n\n@media (min-width: 768px) {\n    @for $i from 1 through $grid-columns {\n        .col-md-#{$i} {\n            grid-column: span $i;\n        }\n    }\n}\n```\n\n### Темы\n```scss\n// _themes.scss\n$themes: (\n    light: (\n        bg-color: #ffffff,\n        text-color: #333333,\n        primary-color: #3498db\n    ),\n    dark: (\n        bg-color: #1a1a1a,\n        text-color: #f5f5f5,\n        primary-color: #2980b9\n    )\n);\n\n@mixin theme($theme-name) {\n    $theme-map: map-get($themes, $theme-name);\n    \n    @each $key, $value in $theme-map {\n        --#{$key}: #{$value};\n    }\n}\n\n.light-theme {\n    @include theme(light);\n}\n\n.dark-theme {\n    @include theme(dark);\n}\n```\n\n### BEM с Sass\n```scss\n// _bem.scss\n@mixin element($element) {\n    &__#{$element} {\n        @content;\n    }\n}\n\n@mixin modifier($modifier) {\n    &--#{$modifier} {\n        @content;\n    }\n}\n\n.block {\n    padding: 1rem;\n    \n    @include element('title') {\n        font-size: 1.5rem;\n        margin-bottom: 0.5rem;\n    }\n    \n    @include element('content') {\n        font-size: 1rem;\n        line-height: 1.5;\n    }\n    \n    @include modifier('large') {\n        padding: 2rem;\n        \n        @include element('title') {\n            font-size: 2rem;\n        }\n    }\n}\n```\n\n### Утилитарные классы\n```scss\n// _utilities.scss\n$spacings: 0, 0.25, 0.5, 1, 1.5, 2, 3, 4;\n$sides: top, right, bottom, left;\n\n@each $space in $spacings {\n    $i: index($spacings, $space) - 1;\n    \n    .m-#{$i} { margin: #{$space}rem !important; }\n    .p-#{$i} { padding: #{$space}rem !important; }\n    \n    @each $side in $sides {\n        .m#{str-slice($side, 0, 1)}-#{$i} {\n            margin-#{$side}: #{$space}rem !important;\n        }\n        \n        .p#{str-slice($side, 0, 1)}-#{$i} {\n            padding-#{$side}: #{$space}rem !important;\n        }\n    }\n}\n```\n\n## Инструменты и сборка\n\n### Gulp с Sass\n```javascript\n// gulpfile.js\nconst gulp = require('gulp');\nconst sass = require('gulp-sass');\nconst autoprefixer = require('gulp-autoprefixer');\nconst cleanCSS = require('gulp-clean-css');\n\nsass.compiler = require('node-sass');\n\ngulp.task('styles', () => {\n    return gulp.src('src/scss/**/*.scss')\n        .pipe(sass().on('error', sass.logError))\n        .pipe(autoprefixer())\n        .pipe(cleanCSS())\n        .pipe(gulp.dest('dist/css'));\n});\n\ngulp.task('watch', () => {\n    gulp.watch('src/scss/**/*.scss', gulp.series('styles'));\n});\n```\n\n### Webpack с Sass\n```javascript\n// webpack.config.js\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                test: /\\.scss$/,\n                use: [\n                    'style-loader',\n                    'css-loader',\n                    'postcss-loader',\n                    'sass-loader'\n                ]\n            }\n        ]\n    }\n};\n```\n\n### PostCSS + Sass\n```javascript\n// postcss.config.js\nmodule.exports = {\n    plugins: [\n        require('autoprefixer'),\n        require('cssnano')\n    ]\n};\n```\n\n## Лучшие практики\n\n### 1. Организация файловой структуры\n```\nscss/\n├── abstract/\n│   ├── _variables.scss\n│   ├── _mixins.scss\n│   └── _functions.scss\n├── base/\n│   ├── _reset.scss\n│   ├── _typography.scss\n│   └── _animations.scss\n├── components/\n│   ├── _buttons.scss\n│   ├── _cards.scss\n│   └── _forms.scss\n├── layout/\n│   ├── _header.scss\n│   ├── _footer.scss\n│   └── _grid.scss\n├── pages/\n│   ├── _home.scss\n│   └── _contact.scss\n├── themes/\n│   └── _dark.scss\n└── main.scss\n```\n\n### 2. Именование переменных\n```scss\n// Хорошо\n$color-primary: #3498db;\n$spacing-large: 2rem;\n$breakpoint-tablet: 768px;\n\n// Плохо\n$red: #ff0000;\n$big: 2rem;\n$tablet: 768px;\n```\n\n### 3. Избегайте глубокой вложенности\n```scss\n// Плохо - слишком глубокая вложенность\n.header {\n    .nav {\n        ul {\n            li {\n                a {\n                    span {\n                        // ...\n                    }\n                }\n            }\n        }\n    }\n}\n\n// Хорошо - ограничьте вложенность 3-4 уровнями\n.header {\n    .nav {\n        &__list {\n            // ...\n        }\n        \n        &__item {\n            // ...\n        }\n    }\n}\n```\n\n### 4. Используйте миксины для повторяющегося кода\n\n### 5. Документируйте сложные миксины и функции\n\n## Производительность\n\n### Компиляция в продакшене\n```bash\n# Минификация\nsass --style compressed input.scss output.css\n\n# Карты источников\nsass --source-map input.scss output.css\n\n# Отключение карт источников в продакшене\nsass --no-source-map --style compressed input.scss output.css\n```\n\n### Оптимизация импортов\n```scss\n// Используйте парциальные файлы (начинающиеся с _)\n// Они не компилируются отдельно\n@import 'components/buttons';\n@import 'components/cards';\n```\n\n## Совместимость\n\n### Полифилы и префиксы\n```scss\n@mixin flexbox {\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n}\n\n.container {\n    @include flexbox;\n}\n\n// Или используйте autoprefixer в сборке\n```\n\n### Постепенный отказ от препроцессоров\n```scss\n// Используйте CSS переменные вместе с Sass\n:root {\n    --primary-color: #{$primary-color};\n    --spacing-base: #{$spacing-base};\n}\n\n.element {\n    color: var(--primary-color);\n    margin: var(--spacing-base);\n}\n```\n\n## Отладка\n\n### Карты источников (Source Maps)\n```bash\n# Генерация source maps\nsass --source-map input.scss output.css\n```\n\n```html\n<!-- Включение в браузере -->\n<!-- Chrome DevTools → Settings → Enable CSS source maps -->\n```\n\n### Логирование\n```scss\n@debug \"Current value: #{$variable}\";\n@warn \"This mixin is deprecated\";\n@error \"Invalid color value: #{$color}\";\n```\n\n## Альтернативы\n\n### CSS-in-JS\n- Styled Components\n- Emotion\n- Stitches\n\n### CSS-модули\n```css\n/* styles.module.css */\n.button {\n    background: blue;\n}\n```\n\n```javascript\nimport styles from './styles.module.css';\n\nelement.className = styles.button;\n```\n\n### Нативные CSS функции\n- CSS Custom Properties (переменные)\n- CSS Nesting (вложенность)\n- CSS Functions (min(), max(), clamp())\n\n## Миграция с препроцессоров\n\n### Постепенный переход\n1. Начните с использования CSS переменных\n2. Замените простые миксины на CSS функции\n3. Используйте PostCSS для автопрефиксов\n4. Переходите на CSS модули для изоляции\n\n## Заключение\n\nCSS препроцессоры остаются мощным инструментом для разработки, особенно в крупных проектах. Они обеспечивают:\n- Лучшую организацию кода\n- Повторное использование\n- Поддержку сложной логики\n- Упрощенное обслуживание\n\nОднако с развитием нативного CSS (переменные, вложенность, функции) необходимость в препроцессорах уменьшается. Выбор инструмента зависит от:\n- Размера и сложности проекта\n- Команды и ее опыта\n- Требований к производительности\n- Долгосрочной поддержки\n\nИспользуйте препроцессоры там, где они действительно добавляют ценность, и будьте готовы к переходу на современные нативные технологии.",
  
  "points": [
    "Введение в CSS препроцессоры",
    "Sass/SCSS: синтаксис и возможности",
    "Переменные и вложенность",
    "Миксины (Mixins) и функции",
    "Наследование (Extend)",
    "Импорт и модульность",
    "Управляющие директивы (@if, @for, @each)",
    "Less и Stylus: особенности",
    "Практические примеры и паттерны",
    "Инструменты сборки (Gulp, Webpack)",
    "Лучшие практики организации кода",
    "Производительность и оптимизация",
    "Отладка и source maps",
    "Альтернативы и будущее препроцессоров"
  ],
  
  "lesson": {
    "slug": "sass-advanced-patterns",
    "title": "Продвинутые паттерны в Sass"
  }
}