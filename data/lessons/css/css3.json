{
  "slug": "css3-modern-features",
  "title": "CSS3: Современные возможности и новейшие фичи",
  "description": "Изучите самые современные возможности CSS3: Grid Level 2, Subgrid, Container Queries, Cascade Layers и другие новейшие фичи.",
  "difficulty": "advanced",
  "duration": 70,
  "time":12,
  "theory": "## Введение в современный CSS\n\nCSS3 продолжает развиваться с новыми модулями и возможностями, которые делают разработку более мощной и выразительной.\n\n## CSS Grid Level 2 и Subgrid\n\n### Subgrid - наследование сетки\n```css\n.grid-container {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 20px;\n}\n\n.grid-item {\n    /* Элемент растягивается на 2 колонки родительской сетки */\n    grid-column: span 2;\n    \n    /* Создает внутреннюю сетку, наследующую родительскую */\n    display: grid;\n    grid-template-columns: subgrid;\n    grid-template-rows: subgrid;\n}\n\n.subitem {\n    /* Подэлементы выравниваются по родительской сетке */\n    grid-column: 2 / 4;\n}\n```\n\n### masonry layout (экспериментальная)\n```css\n.grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: masonry; /* Каскадное расположение */\n}\n```\n\n## Container Queries\n\n### Базовый синтаксис\n```css\n.card {\n    container-type: inline-size;\n    container-name: card;\n}\n\n/* Стили применяются когда контейнер шире 400px */\n@container (min-width: 400px) {\n    .card {\n        display: flex;\n        gap: 1rem;\n    }\n    \n    .card-image {\n        flex: 0 0 150px;\n    }\n}\n\n/* Стили для определенного контейнера */\n@container card (min-width: 500px) {\n    .card-title {\n        font-size: 1.5rem;\n    }\n}\n```\n\n### Типы контейнеров\n```css\n/* Отслеживание ширины */\n.element {\n    container-type: inline-size;\n}\n\n/* Отслеживание высоты */\n.element {\n    container-type: size; /* И ширина, и высота */\n}\n\n/* Отслеживание стилей */\n.element {\n    container-type: style;\n}\n\n/* Комбинированный */\n.element {\n    container-type: inline-size style;\n}\n```\n\n### Container query единицы\n```css\n.card {\n    container-type: inline-size;\n}\n\n.card-title {\n    /* 10% от ширины контейнера */\n    font-size: 10cqw;\n    \n    /* 5% от высоты контейнера */\n    margin-top: 5cqh;\n    \n    /* 50% от меньшего измерения */\n    padding: 25cqmin;\n    \n    /* 50% от большего измерения */\n    border-radius: 50cqmax;\n}\n```\n\n## Cascade Layers (Каскадные слои)\n\n### Определение слоев\n```css\n/* Определение слоев в порядке приоритета */\n@layer reset, base, components, utilities, overrides;\n\n/* Стили в слоях */\n@layer reset {\n    * {\n        margin: 0;\n        padding: 0;\n    }\n}\n\n@layer base {\n    body {\n        font-family: system-ui;\n    }\n}\n\n@layer components {\n    .button {\n        background: blue;\n    }\n}\n\n@layer utilities {\n    .text-center {\n        text-align: center;\n    }\n}\n\n/* Анонимный слой (самый низкий приоритет) */\n@layer {\n    .anonymous {\n        color: red;\n    }\n}\n```\n\n### Вложенные слои\n```css\n@layer framework {\n    @layer base, components;\n    \n    @layer base {\n        /* styles */\n    }\n    \n    @layer components {\n        /* styles */\n    }\n}\n\n/* Обращение к вложенному слою */\n@layer framework.components {\n    .button {\n        /* styles */\n    }\n}\n```\n\n### Импорт в слои\n```css\n@import url('reset.css') layer(reset);\n@import url('components.css') layer(components);\n```\n\n## CSS Nesting (Вложенность)\n\n### Нативная вложенность\n```css\n.card {\n    background: white;\n    border-radius: 8px;\n    padding: 1rem;\n    \n    & .title {\n        font-size: 1.5rem;\n        margin-bottom: 0.5rem;\n    }\n    \n    & .content {\n        color: #666;\n        line-height: 1.6;\n        \n        & p {\n            margin: 0.5rem 0;\n        }\n    }\n    \n    &:hover {\n        box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n    }\n    \n    &[data-variant=\"primary\"] {\n        border: 2px solid blue;\n    }\n}\n```\n\n### Синтаксис с @nest\n```css\n.card {\n    background: white;\n    \n    @nest .dark-theme & {\n        background: #222;\n        color: white;\n    }\n    \n    @nest &:hover {\n        transform: scale(1.02);\n    }\n}\n```\n\n## Новые селекторы\n\n### :is() и :where()\n```css\n/* :where() - специфичность 0 */\n:where(header, footer, section) h1 {\n    font-size: 2rem;\n}\n\n/* :is() - специфичность самого специфичного селектора */\n:is(header, footer, section) h1 {\n    margin-bottom: 1rem;\n}\n\n/* Комбинирование */\nav :is(ul, ol) :where(li, a) {\n    /* styles */\n}\n```\n\n### :has() - родительский селектор\n```css\n/* Стили для div, содержащего img */\ndiv:has(img) {\n    border: 2px solid blue;\n}\n\n/* Стили для form с invalid input */\nform:has(input:invalid) {\n    border-color: red;\n}\n\n/* Стили для article с h2 сразу после h1 */\narticle:has(h1 + h2) {\n    background: #f0f0f0;\n}\n\n/* Селектор предыдущего соседа */\nh2:has(+ p) {\n    margin-bottom: 0;\n}\n```\n\n### :focus-visible\n```css\n/* Стили только при фокусе с клавиатуры */\nbutton:focus-visible {\n    outline: 3px solid blue;\n}\n\n/* Отключение outline для клика мышью */\nbutton:focus:not(:focus-visible) {\n    outline: none;\n}\n```\n\n### :user-valid и :user-invalid\n```css\ninput:user-valid {\n    border-color: green;\n}\n\ninput:user-invalid {\n    border-color: red;\n}\n```\n\n## Новые единицы измерения\n\n### Динамические viewport единицы\n```css\n.element {\n    /* 100% высоты окна без адресной строки */\n    height: 100svh;\n    \n    /* 100% высоты окна с адресной строкой */\n    height: 100lvh;\n    \n    /* 100% высоты окна с динамической адресной строкой */\n    height: 100dvh;\n}\n```\n\n### Единицы для container queries\n```css\n.container {\n    container-type: inline-size;\n}\n\n.item {\n    width: 50cqw; /* 50% ширины контейнера */\n    height: 25cqh; /* 25% высоты контейнера */\n    font-size: 5cqmin; /* 5% меньшего измерения */\n    margin: 10cqmax; /* 10% большего измерения */\n}\n```\n\n## Новые функции CSS\n\n### min(), max(), clamp()\n```css\n.element {\n    /* Минимальное значение из списка */\n    width: min(100%, 800px);\n    \n    /* Максимальное значение из списка */\n    font-size: max(16px, 2vw);\n    \n    /* Ограничение значения диапазоном */\n    font-size: clamp(16px, 4vw, 24px);\n    \n    /* Сложные вычисления */\n    padding: clamp(1rem, 5vw - 2rem, 3rem);\n}\n```\n\n### calc() улучшения\n```css\n.element {\n    /* Поддержка вложенности */\n    width: calc(100% - calc(2rem + 4px));\n    \n    /* Тригонометрические функции */\n    transform: rotate(calc(sin(45deg) * 100px));\n    \n    /* Экспоненциальные функции */\n    font-size: calc(pow(1.5, 2) * 1rem);\n}\n```\n\n### Пространственные функции\n```css\n.element {\n    /* Расстояние между точками */\n    width: hypot(3em, 4em); /* 5em */\n    \n    /* Квадратный корень */\n    transform: scale(sqrt(2));\n}\n```\n\n## Цветовые пространства\n\n### OKLCH и OKLab\n```css\n.element {\n    /* Более равномерное цветовое пространство */\n    color: oklch(70% 0.15 240);\n    background: oklab(0.7 -0.1 -0.05);\n    \n    /* Поддержка широкого цветового диапазона */\n    color: color(display-p3 1 0 0);\n}\n```\n\n### color-mix()\n```css\n.element {\n    /* Смешивание цветов */\n    background: color-mix(in oklch, blue, white 30%);\n    \n    /* Смешивание с прозрачностью */\n    border-color: color-mix(in srgb, red 25%, transparent);\n}\n```\n\n### color-contrast()\n```css\n.element {\n    /* Автоматический выбор контрастного цвета */\n    color: color-contrast(black vs white, #666, #ccc);\n    \n    /* С указанием целевого контраста */\n    background: color-contrast(wheat vs tan, sienna, #b22222 to AA);\n}\n```\n\n## Текст и типографика\n\n### text-wrap: balance\n```css\n.heading {\n    /* Балансировка текста для лучшей читаемости */\n    text-wrap: balance;\n    \n    /* Принудительный перенос слов */\n    text-wrap: pretty;\n}\n```\n\n### hanging-punctuation\n```css\n.blockquote {\n    /* Вынос знаков препинания за границу */\n    hanging-punctuation: first allow-end;\n    text-indent: -0.5em;\n}\n```\n\n### initial-letter\n```css\n.dropcap::first-letter {\n    /* Буквица */\n    initial-letter: 3; /* Занимает 3 строки */\n    margin-right: 0.5rem;\n    font-weight: bold;\n}\n```\n\n## Scroll-driven анимации\n\n### Анимации на основе скролла\n```css\n@keyframes reveal {\n    from {\n        opacity: 0;\n        transform: translateY(50px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.element {\n    animation: reveal linear both;\n    animation-timeline: view();\n    animation-range: entry 0% cover 40%;\n}\n```\n\n### Scroll timelines\n```css\n.progress-bar {\n    animation: grow auto linear;\n    animation-timeline: scroll(block);\n}\n\n@keyframes grow {\n    from {\n        transform: scaleX(0);\n    }\n    to {\n        transform: scaleX(1);\n    }\n}\n```\n\n### View timelines\n```css\n.image {\n    animation: parallax linear forwards;\n    animation-timeline: view();\n    animation-range: entry 0% exit 100%;\n}\n```\n\n## Новые свойства layout\n\n### aspect-ratio\n```css\n.image {\n    /* Фиксированное соотношение сторон */\n    aspect-ratio: 16 / 9;\n    width: 100%;\n}\n\n.video-container {\n    aspect-ratio: 16 / 9;\n    background: black;\n}\n```\n\n### content-visibility\n```css\n.long-list {\n    /* Отложенный рендеринг */\n    content-visibility: auto;\n    contain-intrinsic-size: 0 500px;\n}\n\n.section {\n    /* Полностью скрытый рендеринг */\n    content-visibility: hidden;\n}\n```\n\n### :modal псевдокласс\n```css\ndialog:modal {\n    /* Стили для открытого модального окна */\n    background: rgba(0, 0, 0, 0.5);\n}\n```\n\n## Производительность и оптимизация\n\n### contain\n```css\n.widget {\n    /* Изоляция для оптимизации */\n    contain: layout style paint;\n    \n    /* Строгая изоляция */\n    contain: strict;\n}\n```\n\n### content-visibility\n```css\n.lazy-section {\n    /* Автоматическая отложенная загрузка */\n    content-visibility: auto;\n    \n    /* Сохранение места */\n    contain-intrinsic-size: 0 500px;\n}\n```\n\n## Безопасность и изоляция\n\n### :host-context() для Shadow DOM\n```css\n:host-context(.dark-theme) {\n    background: #222;\n}\n\n:host-context(article) {\n    font-size: 1.1em;\n}\n```\n\n## Международization\n\n### line-height-step\n```css\n.text {\n    /* Шаг высоты строки */\n    line-height-step: 0.5rem;\n    \n    /* Выравнивание по сетке */\n    line-height: 1.5;\n}\n```\n\n### text-spacing-trim\n```css\n.heading {\n    /* Удаление лишних пробелов */\n    text-spacing-trim: trim-start;\n}\n```\n\n## Новые возможности для форм\n\n### :autofill\n```css\ninput:autofill {\n    /* Стили для автозаполненных полей */\n    border-color: green;\n    background-color: #e8f5e9;\n}\n\ninput:-webkit-autofill {\n    -webkit-text-fill-color: black;\n    -webkit-box-shadow: 0 0 0px 1000px #e8f5e9 inset;\n}\n```\n\n### инпут типы\n```css\ninput[type=\"range\"] {\n    accent-color: blue;\n}\n\ninput[type=\"checkbox\"] {\n    accent-color: green;\n}\n```\n\n## Градиенты и маски\n\n### conic-gradient\n```css\n.pie-chart {\n    background: conic-gradient(\n        red 0% 33%,\n        green 33% 66%,\n        blue 66% 100%\n    );\n    border-radius: 50%;\n}\n```\n\n### mask-composite\n```css\n.element {\n    mask-image: url(star.svg), url(circle.svg);\n    mask-composite: intersect;\n}\n```\n\n## Переменные (Custom Properties) улучшения\n\n### Типизированные переменные\n```css\n@property --primary-color {\n    syntax: '<color>';\n    inherits: true;\n    initial-value: blue;\n}\n\n@property --angle {\n    syntax: '<angle>';\n    inherits: false;\n    initial-value: 0deg;\n}\n```\n\n### Анимация переменных\n```css\n@property --progress {\n    syntax: '<percentage>';\n    inherits: false;\n    initial-value: 0%;\n}\n\n.element {\n    --progress: 0%;\n    background: linear-gradient(90deg, blue var(--progress), transparent 0);\n    transition: --progress 1s ease;\n}\n\n.element:hover {\n    --progress: 100%;\n}\n```\n\n## Поддержка браузеров и feature detection\n\n### @supports\n```css\n/* Проверка поддержки */\n@supports (display: grid) {\n    .container {\n        display: grid;\n    }\n}\n\n@supports (container-type: inline-size) {\n    .card {\n        container-type: inline-size;\n    }\n}\n\n/* Проверка селектора */\n@supports selector(:has(*)) {\n    .parent:has(.child) {\n        border: 2px solid blue;\n    }\n}\n```\n\n### Progressive enhancement\n```css\n/* Базовые стили для всех браузеров */\n.card {\n    display: flex;\n    flex-direction: column;\n}\n\n/* Улучшенные стили для современных браузеров */\n@supports (container-type: inline-size) {\n    .card {\n        container-type: inline-size;\n    }\n    \n    @container (min-width: 400px) {\n        .card {\n            flex-direction: row;\n        }\n    }\n}\n```\n\n## Инструменты разработчика\n\n### Современные DevTools\n- Container queries inspector\n- Cascade layers panel\n- Scroll-driven animations debugger\n- CSS nesting visualizer\n\n## Лучшие практики для современного CSS\n\n### 1. Используйте feature detection\n### 2. Применяйте progressive enhancement\n### 3. Экспериментируйте с новыми возможностями\n### 4. Следите за поддержкой браузеров\n### 5. Используйте современные инструменты сборки\n### 6. Тестируйте на реальных устройствах\n\n## Будущее CSS\n\n### Houdini API\n```javascript\n// Регистрация кастомных свойств\nCSS.registerProperty({\n    name: '--my-color',\n    syntax: '<color>',\n    inherits: false,\n    initialValue: 'black'\n});\n```\n\n### Container Queries для стилей\n```css\n@container style(--theme: dark) {\n    .element {\n        background: black;\n        color: white;\n    }\n}\n```\n\n### Аннотации для скринридеров\n```css\n.element::view-transition-group(root) {\n    /* Анимации переходов между страницами */\n}\n```\n\n## Заключение\n\nСовременный CSS предлагает невероятные возможности для создания сложных, адаптивных и производительных интерфейсов. Ключевые направления развития:\n\n1. **Container Queries** - революция в адаптивном дизайне\n2. **Cascade Layers** - управление специфичностью\n3. **Новые селекторы** (:has, :is, :where) - мощь и выразительность\n4. **CSS Nesting** - организация кода\n5. **Scroll-driven анимации** - интерактивность\n\nОсваивайте новые возможности постепенно, используйте feature detection и помните о поддержке браузеров. Современный CSS — это мощный инструмент, который продолжает развиваться и удивлять.",
  
  "points": [
    "CSS Grid Level 2 и Subgrid",
    "Container Queries и единицы измерения",
    "Cascade Layers (каскадные слои)",
    "Нативная вложенность CSS",
    "Новые селекторы: :has(), :is(), :where()",
    "Динамические viewport единицы",
    "Функции min(), max(), clamp()",
    "Современные цветовые пространства",
    "Scroll-driven анимации",
    "Новые свойства: aspect-ratio, content-visibility",
    "Типизированные CSS переменные",
    "Feature detection с @supports",
    "Инструменты разработчика",
    "Будущее CSS: Houdini и новые API"
  ],
  
  "lesson": {
    "slug": "container-queries-practical",
    "title": "Container Queries на практике"
  }
}